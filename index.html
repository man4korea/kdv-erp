<!DOCTYPE html>
<html lang="ko">
<!-- ğŸ“ index.html
     KDV ERP ì‹œìŠ¤í…œ - ë©”ì¸ ëŒ€ì‹œë³´ë“œ
     Create at 250525_1030 Ver1.10 -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ€ì‹œë³´ë“œ - KDV ERP ì‹œìŠ¤í…œ</title>
    <!-- DOMPurify for XSS Protection -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.1.7/purify.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="css/styles.css?v=1.10">
    <link rel="stylesheet" href="css/dashboard.css?v=1.10">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<style>
/* ë¡œë”© ì˜¤ë²„ë ˆì´ ìŠ¤íƒ€ì¼ */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.95);
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    z-index: 9999;
    transition: opacity 0.3s ease;
}

.loading-overlay.show {
    display: flex;
}

.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--border-primary);
    border-radius: 50%;
    border-top-color: var(--primary);
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}
</style>
<body>
    <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <div style="margin-top: 20px; font-size: 14px; color: var(--text-secondary);" id="loadingMessage">
            ì‚¬ìš©ì ì¸ì¦ ì¤‘...
        </div>
    </div>
    
    <!-- ì‚¬ì´ë“œë°” ì˜¤ë²„ë ˆì´ -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
    <!-- ì‚¬ì´ë“œë°” -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h1 class="logo text-primary">CorpEasy</h1>
            <button class="btn btn-icon" id="sidebarCloseBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <nav class="sidebar-nav">
            <ul>
                <!-- ëŒ€ì‹œë³´ë“œ -->
                <li class="active">
                    <a href="index.html" class="menu-item">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>ëŒ€ì‹œë³´ë“œ</span>
                    </a>
                </li>
                
                <!-- ì¸ì‚¬ê´€ë¦¬ (í™œì„±í™”) -->
                <li class="has-submenu">
                    <a href="#" class="menu-item">
                        <i class="fas fa-users"></i>
                        <span>ì¸ì‚¬ê´€ë¦¬</span>
                        <i class="fas fa-chevron-right submenu-arrow"></i>
                    </a>
                    <ul class="submenu">
                        <li><a href="pages/hr/employee-list.html">ì§ì› ëª©ë¡</a></li>
                        <li><a href="pages/hr/employee-add.html">ì§ì› ë“±ë¡</a></li>
                        <li><a href="#" onclick="showComingSoon()">ì¡°ì§ë„</a></li>
                        <li><a href="#" onclick="showComingSoon()">ê·¼íƒœê´€ë¦¬</a></li>
                    </ul>
                </li>
                
                <!-- ë¬¸ì„œê´€ë¦¬ (ë¹„í™œì„±í™”) -->
                <li>
                    <a href="#" class="menu-item" onclick="showComingSoon()">
                        <i class="fas fa-file-alt"></i>
                        <span>ë¬¸ì„œê´€ë¦¬</span>
                        <span class="menu-badge">ì¤€ë¹„ì¤‘</span>
                    </a>
                </li>
                
                <!-- ì–‘ì‹ê´€ë¦¬ (ë¹„í™œì„±í™”) -->
                <li>
                    <a href="#" class="menu-item" onclick="showComingSoon()">
                        <i class="fas fa-wpforms"></i>
                        <span>ì–‘ì‹ê´€ë¦¬</span>
                        <span class="menu-badge">ì¤€ë¹„ì¤‘</span>
                    </a>
                </li>
                
                <!-- ì‚¬ê·œê´€ë¦¬ (ë¹„í™œì„±í™”) -->
                <li>
                    <a href="#" class="menu-item" onclick="showComingSoon()">
                        <i class="fas fa-gavel"></i>
                        <span>ì‚¬ê·œê´€ë¦¬</span>
                        <span class="menu-badge">ì¤€ë¹„ì¤‘</span>
                    </a>
                </li>
                
                <!-- êµ¬ë¶„ì„  -->
                <li style="margin: var(--spacing-4) 0;">
                    <hr style="border: none; height: 1px; background: var(--border-primary);">
                </li>
                
                <!-- ì„¤ì • -->
                <li>
                    <a href="#" class="menu-item" onclick="showComingSoon()">
                        <i class="fas fa-cog"></i>
                        <span>ì‹œìŠ¤í…œ ì„¤ì •</span>
                    </a>
                </li>
                
                <!-- ë¡œê·¸ì•„ì›ƒ -->
                <li>
                    <a href="#" class="menu-item" onclick="handleLogout()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>ë¡œê·¸ì•„ì›ƒ</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>
    
    <!-- ë©”ì¸ í—¤ë” -->
    <header class="main-header">
        <div class="header-left">
            <button class="hamburger-btn" id="hamburgerBtn">
                <div class="hamburger-icon">
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                </div>
            </button>
        </div>
        
        <div class="header-center">
            <a href="index.html" class="logo">CorpEasy</a>
        </div>
        
        <div class="header-right">
            <!-- ê²€ìƒ‰ -->
            <div class="header-icon" title="ê²€ìƒ‰">
                <i class="fas fa-search"></i>
            </div>
            <!-- ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ -->
            <div class="header-icon" title="ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§" onclick="showPerformanceDashboard()">
                <i class="fas fa-tachometer-alt"></i>
            </div>
            
            <!-- ì•Œë¦¼ -->
            <div class="header-icon" title="ì•Œë¦¼" onclick="showNotifications()">
                <i class="fas fa-bell"></i>
                <div class="notification-badge"></div>
            </div>
            
            <!-- ì‚¬ìš©ì í”„ë¡œí•„ -->
            <div class="user-profile" id="userProfile" onclick="showUserMenu()">
                <div class="user-avatar" id="userAvatar">U</div>
                <div class="user-name" id="userName">ì‚¬ìš©ì</div>
                <i class="fas fa-chevron-down" style="font-size: 12px; color: var(--text-secondary);"></i>
            </div>
        </div>
    </header>
    
    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="main-content" id="mainContent">
        <div class="content-wrapper">
            <!-- í˜ì´ì§€ ì œëª© -->
            <div class="page-title">
                <h1>ëŒ€ì‹œë³´ë“œ</h1>
                <p class="page-subtitle">KDV ERP ì‹œìŠ¤í…œ í˜„í™©ì„ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”</p>
            </div>
            
            <!-- í†µê³„ ì¹´ë“œ -->
            <div class="dashboard-stats">
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">ë“±ë¡ëœ ì§ì›</div>
                        <div class="stat-icon blue">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="totalEmployees">158</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> ì „ì›” ëŒ€ë¹„ +12ëª…
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">ìƒì„±ëœ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸</div>
                        <div class="stat-icon green">
                            <i class="fas fa-file-alt"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="totalPosts">42</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> ì´ë²ˆ ì£¼ +5ê°œ
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">íŠ¸ë Œë“œ ì•Œë¦¼</div>
                        <div class="stat-icon yellow">
                            <i class="fas fa-bell"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="totalAlerts">13</div>
                    <div class="stat-change">
                        <i class="fas fa-minus"></i> ë³€ë™ ì—†ìŒ
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">í™œì„± AI ë¹„ì„œ</div>
                        <div class="stat-icon purple">
                            <i class="fas fa-robot"></i>
                        </div>
                    </div>
                    <div class="stat-value" id="activeAI">3</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> ì‹ ê·œ +1ê°œ
                    </div>
                </div>
            </div>
            
            <!-- ì°¨íŠ¸ ì˜ì—­ -->
            <div class="dashboard-charts">
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">ìµœê·¼ ë¶„ì„ ì½˜í…ì¸ </h3>
                        <button class="btn btn-secondary btn-icon">
                            <i class="fas fa-ellipsis-h"></i>
                        </button>
                    </div>
                    <div class="chart-placeholder">
                        ğŸ“Š ì°¨íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤<br>
                        <small>ë°ì´í„° ì—°ë™ í›„ ì‹¤ì‹œê°„ ì°¨íŠ¸ê°€ í‘œì‹œë©ë‹ˆë‹¤</small>
                    </div>
                </div>
                
                <div class="chart-card">
                    <div class="chart-header">
                        <h3 class="chart-title">AI ë¹„ì„œ í™œìš©</h3>
                    </div>
                    <div style="padding: var(--spacing-4) 0;">
                        <div style="margin-bottom: var(--spacing-4);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: var(--spacing-1);">
                                <span style="font-size: var(--text-sm);">ìƒì„±ëœ ì‘ë‹µ</span>
                                <span style="font-size: var(--text-sm); font-weight: 500;">1254</span>
                            </div>
                            <div style="background: var(--bg-secondary); height: 8px; border-radius: 4px;">
                                <div style="background: var(--primary); height: 100%; width: 85%; border-radius: 4px;"></div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: var(--spacing-4);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: var(--spacing-1);">
                                <span style="font-size: var(--text-sm);">í‰ê·  ì‘ë‹µ ì‹œê°„</span>
                                <span style="font-size: var(--text-sm); font-weight: 500;">0.8ì´ˆ</span>
                            </div>
                            <div style="background: var(--bg-secondary); height: 8px; border-radius: 4px;">
                                <div style="background: var(--success); height: 100%; width: 90%; border-radius: 4px;"></div>
                            </div>
                        </div>
                        
                        <div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: var(--spacing-1);">
                                <span style="font-size: var(--text-sm);">ê³ ê° ë§Œì¡±ë„</span>
                                <span style="font-size: var(--text-sm); font-weight: 500; color: var(--success);">4.7/5</span>
                            </div>
                            <div style="background: var(--bg-secondary); height: 8px; border-radius: 4px;">
                                <div style="background: var(--success); height: 100%; width: 94%; border-radius: 4px;"></div>
                            </div>
                        </div>
                        
                        <div style="margin-top: var(--spacing-4); text-align: center;">
                            <span style="font-size: var(--text-sm); color: var(--success); font-weight: 500;">
                                <i class="fas fa-arrow-up"></i> +32% ì¦ê°€
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ìµœê·¼ í™œë™ -->
            <div class="recent-activity">
                <div class="chart-header">
                    <h3 class="chart-title">ìµœê·¼ í™œë™</h3>
                    <button class="view-all" onclick="showAllActivity()">ëª¨ë“  í™œë™ ë³´ê¸°</button>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon blue">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">ìƒˆë¡œìš´ ì§ì›ì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤</div>
                        <div class="activity-time">5ë¶„ ì „</div>
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon green">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">ì¤‘ì†Œê¸°ì—… ë””ì§€í„¸ ì „í™˜ ì „ëµ ë¬¸ì„œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤</div>
                        <div class="activity-time">2ì‹œê°„ ì „</div>
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon yellow">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">ì¸ê³µì§€ëŠ¥ ê¸°ìˆ  ì¤‘ì†Œê¸°ì—… ì ìš© íŠ¸ë Œë“œ ì•Œë¦¼</div>
                        <div class="activity-time">4ì‹œê°„ ì „</div>
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon purple">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">AI ë¹„ì„œê°€ ìƒˆë¡œìš´ ì •ì±… ë³€í™”ë¥¼ ê°ì§€í–ˆìŠµë‹ˆë‹¤</div>
                        <div class="activity-time">6ì‹œê°„ ì „</div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Firebase ë° ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <!-- í–„ë²„ê±° ë²„íŠ¼ ê¸°ë³¸ ê¸°ëŠ¥ (í´ë°±) -->
    <script>
        // DOM ë¡œë“œ ì¦‰ì‹œ ê¸°ë³¸ í–„ë²„ê±° ê¸°ëŠ¥ ì—°ê²° (UI ì»¨íŠ¸ë¡¤ëŸ¬ ë¡œë“œ ì „ì—ë„ ì‘ë™)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ” ê¸°ë³¸ í–„ë²„ê±° ê¸°ëŠ¥ ì´ˆê¸°í™”');
            
            const hamburgerBtn = document.getElementById('hamburgerBtn');
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const sidebarCloseBtn = document.getElementById('sidebarCloseBtn');
            
            // ê¸°ë³¸ í† ê¸€ í•¨ìˆ˜
            function toggleSidebar() {
                if (sidebar && sidebar.classList.contains('active')) {
                    // ë‹«ê¸°
                    sidebar.classList.remove('active');
                    if (sidebarOverlay) sidebarOverlay.classList.remove('active');
                    if (hamburgerBtn) hamburgerBtn.classList.remove('active');
                    console.log('ğŸ”´ ì‚¬ì´ë“œë°” ë‹«í˜');
                } else if (sidebar) {
                    // ì—´ê¸°
                    sidebar.classList.add('active');
                    if (sidebarOverlay) sidebarOverlay.classList.add('active');
                    if (hamburgerBtn) hamburgerBtn.classList.add('active');
                    console.log('ğŸŸ¢ ì‚¬ì´ë“œë°” ì—´ë¦¼');
                }
            }
            
            // ì´ë²¤íŠ¸ ì—°ê²°
            if (hamburgerBtn) {
                hamburgerBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('ğŸ” í–„ë²„ê±° ë²„íŠ¼ í´ë¦­ë¨');
                    toggleSidebar();
                });
                console.log('âœ… í–„ë²„ê±° ë²„íŠ¼ ì´ë²¤íŠ¸ ì—°ê²° ì™„ë£Œ');
            } else {
                console.error('âŒ í–„ë²„ê±° ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
            }
            
            if (sidebarCloseBtn) {
                sidebarCloseBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    toggleSidebar();
                });
            }
            
            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', toggleSidebar);
            }
            
            // ESC í‚¤ë¡œ ì‚¬ì´ë“œë°” ë‹«ê¸°
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && sidebar && sidebar.classList.contains('active')) {
                    toggleSidebar();
                }
            });
            
            // ì „ì—­ í•¨ìˆ˜ë¡œ ë“±ë¡ (ë””ë²„ê¹…ìš©)
            window.toggleSidebarFallback = toggleSidebar;
        });
    </script>
    
    <!-- ëŒ€ì‹œë³´ë“œ JavaScript ëª¨ë“ˆ -->
    <!-- Firebase ë¡œë“œ ì‹¤íŒ¨ì‹œ ëŒ€ì²´ ì¸ì¦ ì²´í¬ -->
    <script>
        // Firebase ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨ì‹œ ë°±ì—… ì¸ì¦ ì²´í¬
        let firebaseLoadTimeout = setTimeout(() => {
            console.warn('âš ï¸ Firebase ëª¨ë“ˆ ë¡œë“œ ì‹œê°„ ì´ˆê³¼ - ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™');
            window.location.href = 'login.html';
            }, 1000); // 1ì´ˆ ëŒ€ê¸°
        
        // Firebase ëª¨ë“ˆì´ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ë©´ íƒ€ì´ë¨¸ í•´ì œ
        window.addEventListener('firebaseReady', () => {
            console.log('âœ… Firebase ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');
            clearTimeout(firebaseLoadTimeout);
        });
    </script>
    <script type="module" src="./js/dashboard.js?v=1.10"></script>
</body>
</html>