<!DOCTYPE html>
<html lang="ko">
<!-- ğŸ“ auth-test.html
     KDV ì‹œìŠ¤í…œ - ì¸ì¦ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ í˜ì´ì§€
     Create at 250524_1845 Ver1.00 -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¸ì¦ í…ŒìŠ¤íŠ¸ - KDV ERP</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .test-container {
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background-color: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
        }
        .test-result {
            margin-top: 15px;
            padding: 10px;
            border-radius: var(--radius-md);
            font-family: monospace;
            font-size: var(--text-sm);
        }
        .success { 
            background-color: var(--bg-success); 
            color: var(--success); 
        }
        .error { 
            background-color: var(--bg-danger); 
            color: var(--danger); 
        }
        .info { 
            background-color: var(--bg-info); 
            color: var(--info); 
        }
        .user-info {
            background-color: var(--bg-secondary);
            padding: 15px;
            border-radius: var(--radius-md);
            margin-top: 15px;
        }
        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .btn-group .btn {
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="test-container">
            <h1 class="text-2xl font-bold">ğŸ” Firebase ì¸ì¦ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
            <p class="text-secondary">ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ, ì„¸ì…˜ ê´€ë¦¬ ë“± ì¸ì¦ ê¸°ëŠ¥ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
            
            <!-- í˜„ì¬ ì¸ì¦ ìƒíƒœ -->
            <div class="test-section">
                <h2 class="text-lg font-medium">ğŸ“Š í˜„ì¬ ì¸ì¦ ìƒíƒœ</h2>
                <div id="authStatus" class="user-info">
                    â³ ì¸ì¦ ìƒíƒœë¥¼ í™•ì¸í•˜ëŠ” ì¤‘...
                </div>
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="checkAuthStatus()">ìƒíƒœ ìƒˆë¡œê³ ì¹¨</button>
                    <button class="btn btn-secondary" onclick="showUserDetails()">ì‚¬ìš©ì ì •ë³´ ë³´ê¸°</button>
                </div>
            </div>
            
            <!-- í…ŒìŠ¤íŠ¸ ë¡œê·¸ì¸ -->
            <div class="test-section">
                <h2 class="text-lg font-medium">ğŸ§ª í…ŒìŠ¤íŠ¸ ë¡œê·¸ì¸</h2>
                <p class="text-sm text-secondary">í…ŒìŠ¤íŠ¸ ê³„ì •ìœ¼ë¡œ ë¹ ë¥¸ ë¡œê·¸ì¸ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.</p>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="testLogin()">í…ŒìŠ¤íŠ¸ ê³„ì • ë¡œê·¸ì¸</button>
                    <button class="btn btn-danger" onclick="testLogout()">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
                
                <div id="loginResult" class="test-result" style="display: none;">
                    <!-- ë¡œê·¸ì¸ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <!-- ê¶Œí•œ í…ŒìŠ¤íŠ¸ -->
            <div class="test-section">
                <h2 class="text-lg font-medium">ğŸ”’ ê¶Œí•œ í…ŒìŠ¤íŠ¸</h2>
                <p class="text-sm text-secondary">ë‹¤ì–‘í•œ ë³´ì•ˆ ë“±ê¸‰ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="testPermission('ì¼ë°˜')">ì¼ë°˜ ê¶Œí•œ í™•ì¸</button>
                    <button class="btn btn-primary" onclick="testPermission('2ê¸‰')">2ê¸‰ ê¶Œí•œ í™•ì¸</button>
                    <button class="btn btn-primary" onclick="testPermission('1ê¸‰')">1ê¸‰ ê¶Œí•œ í™•ì¸</button>
                </div>
                
                <div id="permissionResult" class="test-result" style="display: none;">
                    <!-- ê¶Œí•œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <!-- ì„¸ì…˜ í…ŒìŠ¤íŠ¸ -->
            <div class="test-section">
                <h2 class="text-lg font-medium">â° ì„¸ì…˜ í…ŒìŠ¤íŠ¸</h2>
                <p class="text-sm text-secondary">ì„¸ì…˜ ì§€ì†ì„±ê³¼ ìë™ ë¡œê·¸ì¸ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
                
                <div class="btn-group">
                    <button class="btn btn-primary" onclick="testSessionPersistence()">ì„¸ì…˜ ì§€ì†ì„± í…ŒìŠ¤íŠ¸</button>
                    <button class="btn btn-secondary" onclick="clearAllSessions()">ëª¨ë“  ì„¸ì…˜ ì‚­ì œ</button>
                </div>
                
                <div id="sessionResult" class="test-result" style="display: none;">
                    <!-- ì„¸ì…˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
            </div>
            
            <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
            <div class="test-section">
                <h2 class="text-lg font-medium">ğŸ§­ í˜ì´ì§€ ì´ë™</h2>
                <div class="btn-group">
                    <a href="login.html" class="btn btn-primary">ë¡œê·¸ì¸ í˜ì´ì§€</a>
                    <a href="index.html" class="btn btn-secondary">ë©”ì¸ ëŒ€ì‹œë³´ë“œ</a>
                    <a href="firebase-test.html" class="btn btn-secondary">Firebase ì—°ê²° í…ŒìŠ¤íŠ¸</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase ë° ì¸ì¦ ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="module">
        // LoginManager ë“± auth.js ëª¨ë“ˆì—ì„œ í•„ìš”í•œ ê¸°ëŠ¥ë“¤ì„ import
        import { LoginManager, checkPageAccess, formatUserInfo } from './js/auth.js';
        // Firebase ê°ì²´ë“¤ì€ LoginManagerë¥¼ í†µí•´ ê°„ì ‘ì ìœ¼ë¡œ ì‚¬ìš©ë˜ë¯€ë¡œ ì§ì ‘ importëŠ” ë¶ˆí•„ìš”
        // import { app, db, auth } from './js/firebase-config.js'; // Removed direct import
        
        // ì „ì—­ ë³€ìˆ˜
        let loginManager;
        let firebaseAppInstance; // To store the app instance if needed for checkExistingSession

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ ì¸ì¦ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œ');
            
            // ë¡œê·¸ì¸ ë§¤ë‹ˆì € ì´ˆê¸°í™”
            loginManager = new LoginManager();
            window.loginManager = loginManager; // ì „ì—­ ì ‘ê·¼ì„ ìœ„í•´ ë…¸ì¶œ
            
            // firebase-config.jsì—ì„œ ì´ˆê¸°í™”ëœ app ì¸ìŠ¤í„´ìŠ¤ ê°€ì ¸ì˜¤ê¸° (í•„ìš”í•˜ë‹¤ë©´)
            // importë¥¼ ì§ì ‘ í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, í•„ìš”í•˜ë‹¤ë©´ ë‹¤ë¥¸ ë°©ì•ˆ ê³ ë ¤ ë˜ëŠ” ë¶ˆí•„ìš” ì‹œ ì œê±°
            // í˜„ì¬ checkExistingSessionì—ì„œ app.options.apiKeyë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ í•„ìš”
            // firebase-config.jsì—ì„œ appì„ ì „ì—­ìœ¼ë¡œ ë…¸ì¶œí•˜ê±°ë‚˜ ì—¬ê¸°ì„œ ë‹¤ì‹œ import í•„ìš”
            // ì¼ë‹¨ ì—¬ê¸°ì„œëŠ” í•„ìš”ì— ë”°ë¼ firebase-config.jsì—ì„œ appì„ importí•˜ëŠ” ê²ƒìœ¼ë¡œ ê°€ì •
            import('./js/firebase-config.js').then(module => {
                 firebaseAppInstance = module.app;
                 // ì´ˆê¸° ìƒíƒœ í™•ì¸
                 checkAuthStatus();
            }).catch(error => {
                 console.error('âŒ firebase-config.js ë¡œë“œ ì‹¤íŒ¨:', error);
                 updateAuthStatusDisplay(false, null, 'Firebase ì„¤ì • ë¡œë“œ ì˜¤ë¥˜');
            });
            
            // ì¸ì¦ ìƒíƒœ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
            loginManager.addAuthStateListener(onAuthStateChange);
        });
        
        /**
         * ì¸ì¦ ìƒíƒœ ë³€í™” ì²˜ë¦¬
         */
        function onAuthStateChange(isLoggedIn, userData) {
            console.log('ğŸ”„ ì¸ì¦ ìƒíƒœ ë³€í™”:', isLoggedIn, userData);
            updateAuthStatusDisplay(isLoggedIn, userData);
        }
        
        /**
         * í˜„ì¬ ì¸ì¦ ìƒíƒœ í™•ì¸
         */
        window.checkAuthStatus = function() {
            const currentUser = loginManager.getCurrentUser();
            updateAuthStatusDisplay(currentUser.isLoggedIn, currentUser);
        }
        
        /**
         * ì¸ì¦ ìƒíƒœ í‘œì‹œ ì—…ë°ì´íŠ¸
         */
        function updateAuthStatusDisplay(isLoggedIn, userData, errorMessage = null) { // Added optional errorMessage
            const statusDiv = document.getElementById('authStatus');
            
            if (errorMessage) {
                statusDiv.innerHTML = `
                    <div class="error">
                        âŒ <strong>ì¸ì¦ ìƒíƒœ í™•ì¸ ì˜¤ë¥˜</strong><br>
                        ì˜¤ë¥˜: ${errorMessage}
                    </div>
                `;
            } else if (isLoggedIn && userData) {
                statusDiv.innerHTML = `
                    <div class="success">
                        âœ… <strong>ë¡œê·¸ì¸ ìƒíƒœ</strong><br>
                        ì´ë©”ì¼: ${userData.user?.email || 'N/A'}<br>
                        UID: ${userData.user?.uid || 'N/A'}<br>
                        ë³´ì•ˆë“±ê¸‰: ${userData.profile?.securityLevel || 'ì •ë³´ ì—†ìŒ'}<br>
                        ê´€ë¦¬ì: ${userData.profile?.isAdmin ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}<br>
                        ìµœê·¼ ë¡œê·¸ì¸: ${userData.profile?.lastLoginAt ? new Date(userData.profile.lastLoginAt.toDate()).toLocaleString('ko-KR') : 'ì •ë³´ ì—†ìŒ'} <!-- Use toDate() -->
                    </div>
                `;
            } else {
                statusDiv.innerHTML = `
                    <div class="error">
                        âŒ <strong>ë¡œê·¸ì•„ì›ƒ ìƒíƒœ</strong><br>
                        ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.
                    </div>
                `;
            }
        }
        
        /**
         * í…ŒìŠ¤íŠ¸ ê³„ì • ë¡œê·¸ì¸
         */
        window.testLogin = async function() {
            const resultDiv = document.getElementById('loginResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<div class="info">â³ í…ŒìŠ¤íŠ¸ ë¡œê·¸ì¸ ì§„í–‰ ì¤‘...</div>';
            
            try {
                // NOTE: í…ŒìŠ¤íŠ¸ ê³„ì • ì •ë³´ëŠ” ì‹¤ì œ ì‚¬ìš© í™˜ê²½ì—ì„œ ë…¸ì¶œë˜ì§€ ì•Šë„ë¡ ê´€ë¦¬ í•„ìš”
                const result = await loginManager.login('man4korea@gmail.com', 'dmlwjdqn@Wkd24', true);
                
                if (result.success) {
                    resultDiv.innerHTML = `
                        <div class="success">
                            âœ… <strong>ë¡œê·¸ì¸ ì„±ê³µ!</strong><br>
                            ì´ë©”ì¼: ${result.user.email}<br>
                            UID: ${result.user.uid}<br>
                            ì‹œê°„: ${new Date().toLocaleString('ko-KR')}
                        </div>
                    `;
                } else {
                    throw new Error(result.error);
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error">
                        âŒ <strong>ë¡œê·¸ì¸ ì‹¤íŒ¨!</strong><br>
                        ì˜¤ë¥˜: ${error.message || error}<br>
                        ì‹œê°„: ${new Date().toLocaleString('ko-KR')}
                    </div>
                `;
                console.error('í…ŒìŠ¤íŠ¸ ë¡œê·¸ì¸ ì˜¤ë¥˜:', error);
            }
        }
        
        /**
         * ë¡œê·¸ì•„ì›ƒ í…ŒìŠ¤íŠ¸
         */
        window.testLogout = async function() {
            const resultDiv = document.getElementById('loginResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<div class="info">â³ ë¡œê·¸ì•„ì›ƒ ì§„í–‰ ì¤‘...</div>';
            
            try {
                const result = await loginManager.logout();
                
                if (result.success) {
                    resultDiv.innerHTML = `
                        <div class="success">
                            âœ… <strong>ë¡œê·¸ì•„ì›ƒ ì„±ê³µ!</strong><br>
                            ì‹œê°„: ${new Date().toLocaleString('ko-KR')}
                        </div>
                    `;
                } else {
                    throw new Error(result.error);
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error">
                        âŒ <strong>ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨!</strong><br>
                        ì˜¤ë¥˜: ${error.message || error}<br>
                        ì‹œê°„: ${new Date().toLocaleString('ko-KR')}
                    </div>
                `;
                console.error('ë¡œê·¸ì•„ì›ƒ ì˜¤ë¥˜:', error);
            }
        }
        
        /**
         * ê¶Œí•œ í…ŒìŠ¤íŠ¸
         */
        window.testPermission = function(requiredLevel) {
            const resultDiv = document.getElementById('permissionResult');
            resultDiv.style.display = 'block';
            
            const currentUser = loginManager.getCurrentUser();
            
            if (!currentUser.isLoggedIn) {
                resultDiv.innerHTML = `
                    <div class="error">
                        âŒ <strong>ê¶Œí•œ í™•ì¸ ë¶ˆê°€</strong><br>
                        ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.
                    </div>
                `;
                console.warn('ê¶Œí•œ í…ŒìŠ¤íŠ¸: ë¡œê·¸ì¸ í•„ìš”');
                return;
            }
            
            const hasPermission = loginManager.checkUserPermission(requiredLevel);
            const userLevel = currentUser.profile?.securityLevel || 'ì •ë³´ ì—†ìŒ';
            const isAdmin = currentUser.profile?.isAdmin || false;
            
            if (hasPermission) {
                resultDiv.innerHTML = `
                    <div class="success">
                        âœ… <strong>${requiredLevel} ê¶Œí•œ ë³´ìœ </strong><br>
                        í˜„ì¬ ì‚¬ìš©ì ë“±ê¸‰: ${userLevel}<br>
                        ê´€ë¦¬ì ì—¬ë¶€: ${isAdmin ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}<br>
                        ì ‘ê·¼ ê°€ëŠ¥: ì˜ˆ
                    </div>
                `;
                console.log(`ê¶Œí•œ í…ŒìŠ¤íŠ¸ ì„±ê³µ: ${requiredLevel} ê¶Œí•œ ë³´ìœ `);
            } else {
                resultDiv.innerHTML = `
                    <div class="error">
                        âŒ <strong>${requiredLevel} ê¶Œí•œ ë¶€ì¡±</strong><br>
                        í˜„ì¬ ì‚¬ìš©ì ë“±ê¸‰: ${userLevel}<br>
                        ê´€ë¦¬ì ì—¬ë¶€: ${isAdmin ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}<br>
                        ì ‘ê·¼ ê°€ëŠ¥: ì•„ë‹ˆì˜¤
                    </div>
                `;
                console.warn(`ê¶Œí•œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${requiredLevel} ê¶Œí•œ ë¶€ì¡±`);
            }
        }
        
        /**
         * ì„¸ì…˜ ì§€ì†ì„± í…ŒìŠ¤íŠ¸
         */
        window.testSessionPersistence = async function() {
            const resultDiv = document.getElementById('sessionResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<div class="info">â³ ì„¸ì…˜ ì§€ì†ì„± í™•ì¸ ì¤‘...</div>';
            
            try {
                const sessionInfo = await loginManager.checkExistingSession();
                
                // checkExistingSessionì—ì„œ ì´ë¯¸ ë¦¬ë””ë ‰ì…˜ ì²˜ë¦¬ë¥¼ í•˜ë¯€ë¡œ, ì—¬ê¸°ì„œëŠ” ê²°ê³¼ë§Œ í‘œì‹œ
                resultDiv.innerHTML = `
                    <div class="info">
                        ğŸ“‹ <strong>ì„¸ì…˜ ì •ë³´</strong><br>
                        ë¡œê·¸ì¸ ìƒíƒœ: ${sessionInfo.isLoggedIn ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}<br>
                        ì‚¬ìš©ì ì´ë©”ì¼: ${sessionInfo.user?.email || 'N/A'}<br>
                        <!-- Firebase app ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•˜ë¯€ë¡œ, ìœ„ì— importí•˜ê±°ë‚˜ ì „ì—­ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼ í•¨ -->
                        ì„¸ì…˜ íƒ€ì…: ${localStorage.getItem('firebase:authUser:' + (firebaseAppInstance?.options.apiKey || '') + ':[DEFAULT]') ? 'ë¡œì»¬ ìŠ¤í† ë¦¬ì§€' : 'ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€'}<br> <!-- Use firebaseAppInstance -->
                        í™•ì¸ ì‹œê°„: ${new Date().toLocaleString('ko-KR')}
                    </div>
                `;
                console.log('ì„¸ì…˜ ì§€ì†ì„± í…ŒìŠ¤íŠ¸ ê²°ê³¼:', sessionInfo);
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error">
                        âŒ <strong>ì„¸ì…˜ í™•ì¸ ì‹¤íŒ¨</strong><br>
                        ì˜¤ë¥˜: ${error.message}
                    </div>
                `;
                console.error('ì„¸ì…˜ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
            } finally {
                 // checkExistingSessionì—ì„œ ë¦¬ë””ë ‰ì…˜ì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë¡œë”© ìˆ¨ê¹€ ì²˜ë¦¬ëŠ” ì£¼ì˜ í•„ìš”
            }
        }
        
        /**
         * ëª¨ë“  ì„¸ì…˜ ì‚­ì œ
         */
        window.clearAllSessions = function() {
            try {
                // Firebase ì¸ì¦ ê´€ë ¨ ë¡œì»¬ ë°ì´í„° ì‚­ì œ (ë¡œê·¸ì•„ì›ƒ ì‹œ LoginManagerì—ì„œë„ ìˆ˜í–‰)
                localStorage.clear();
                sessionStorage.clear();
                
                // Firebase Auth ìì²´ì˜ signOut í•¨ìˆ˜ í˜¸ì¶œ
                // LoginManager.logout() ì‚¬ìš©ì„ ê¶Œì¥í•˜ì§€ë§Œ, ê°•ì œ ì‚­ì œ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ì§ì ‘ í˜¸ì¶œ ê°€ëŠ¥
                // import { getAuth, signOut } from 'https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js';
                // const auth = getAuth(firebaseAppInstance);
                // signOut(auth);

                // ë˜ëŠ” LoginManager ì¸ìŠ¤í„´ìŠ¤ì˜ logout ë©”ì„œë“œ í˜¸ì¶œ
                if (loginManager) {
                     loginManager.logout();
                } else {
                     console.warn('LoginManager ì¸ìŠ¤í„´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ì •ë¦¬');
                     localStorage.clear();
                     sessionStorage.clear();
                }
                
                const resultDiv = document.getElementById('sessionResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `
                    <div class="success">
                        âœ… <strong>ëª¨ë“  ì„¸ì…˜ ë°ì´í„° ì‚­ì œ ì™„ë£Œ</strong><br>
                        í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”. (3ì´ˆ í›„ ìë™)
                    </div>
                `;
                console.log('ëª¨ë“  ì„¸ì…˜ ë°ì´í„° ì‚­ì œ ì™„ë£Œ');
                
                // 3ì´ˆ í›„ ìë™ ìƒˆë¡œê³ ì¹¨
                setTimeout(() => {
                    window.location.reload();
                }, 3000);
                
            } catch (error) {
                const resultDiv = document.getElementById('sessionResult');
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `
                    <div class="error">
                        âŒ <strong>ì„¸ì…˜ ì‚­ì œ ì‹¤íŒ¨</strong><br>
                        ì˜¤ë¥˜: ${error.message}
                    </div>
                `;
                console.error('ì„¸ì…˜ ì‚­ì œ ì˜¤ë¥˜:', error);
            }
        }
        
        /**
         * ì‚¬ìš©ì ìƒì„¸ ì •ë³´ í‘œì‹œ
         */
        window.showUserDetails = function() {
            const currentUser = loginManager.getCurrentUser();
            
            if (currentUser.isLoggedIn) {
                const userInfo = formatUserInfo(currentUser);
                console.log('ğŸ‘¤ ì‚¬ìš©ì ìƒì„¸ ì •ë³´:', currentUser);
                alert(`ì‚¬ìš©ì ì •ë³´:\\n${userInfo}\\n\\nìì„¸í•œ ì •ë³´ëŠ” ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”.`);
            } else {
                alert('ë¡œê·¸ì¸ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.');
            }
        }

        console.log('ğŸ” ì¸ì¦ í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ ë¡œë“œ ì™„ë£Œ');

    </script>
</body>
</html>