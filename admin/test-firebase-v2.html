<!DOCTYPE html>
<html lang="ko">
<!-- ğŸ“ admin/test-firebase-v2.html
     Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ í˜ì´ì§€ v2 - ìì„¸í•œ ì—ëŸ¬ ë¶„ì„
     Create at 250524_2055 Ver2.00 -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ v2</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .success { background: #d4edda; color: #155724; border-left: 4px solid #28a745; }
        .error { background: #f8d7da; color: #721c24; border-left: 4px solid #dc3545; }
        .info { background: #d1ecf1; color: #0c5460; border-left: 4px solid #17a2b8; }
        .warning { background: #fff3cd; color: #856404; border-left: 4px solid #ffc107; }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 8px;
            font-size: 14px;
            font-weight: 500;
        }
        button:hover { background: #0056b3; transform: translateY(-1px); }
        button:disabled { background: #6c757d; cursor: not-allowed; transform: none; }
        button:active { transform: translateY(0); }
        
        .step-indicator {
            display: inline-block;
            width: 24px;
            height: 24px;
            background: #007bff;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 8px;
        }
        
        .config-info {
            background: #e9ecef;
            padding: 10px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 12px;
            margin: 10px 0;
        }
        
        h1 { color: #343a40; }
        h3 { color: #495057; display: flex; align-items: center; }
    </style>
</head>
<body>
    <h1>ğŸ”¥ Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ v2.0</h1>
    <p style="color: #6c757d;">ìì„¸í•œ ì—ëŸ¬ ë¶„ì„ ë° ë‹¨ê³„ë³„ ì§„ë‹¨</p>
    
    <div class="test-card">
        <h3><span class="step-indicator">1</span>Firebase í”„ë¡œì íŠ¸ ì •ë³´</h3>
        <div class="config-info" id="configInfo">ì„¤ì • ë¡œë”© ì¤‘...</div>
    </div>
    
    <div class="test-card">
        <h3><span class="step-indicator">2</span>Firebase ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸</h3>
        <div id="initStatus" class="status info">í…ŒìŠ¤íŠ¸ ì¤€ë¹„ ì¤‘...</div>
        <button onclick="testInit()">ğŸš€ ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸</button>
    </div>
    
    <div class="test-card">
        <h3><span class="step-indicator">3</span>Firestore ê¸°ë³¸ ì—°ê²° í…ŒìŠ¤íŠ¸</h3>
        <div id="firestoreStatus" class="status info">í…ŒìŠ¤íŠ¸ ëŒ€ê¸° ì¤‘...</div>
        <button onclick="testFirestore()">ğŸ”Œ ì—°ê²° í…ŒìŠ¤íŠ¸</button>
    </div>
    
    <div class="test-card">
        <h3><span class="step-indicator">4</span>ë‹¨ìˆœ ì½ê¸° í…ŒìŠ¤íŠ¸</h3>
        <div id="readStatus" class="status info">í…ŒìŠ¤íŠ¸ ëŒ€ê¸° ì¤‘...</div>
        <button onclick="testRead()">ğŸ“– ì½ê¸° í…ŒìŠ¤íŠ¸</button>
    </div>
    
    <div class="test-card">
        <h3><span class="step-indicator">5</span>ë‹¨ìˆœ ì“°ê¸° í…ŒìŠ¤íŠ¸</h3>
        <div id="writeStatus" class="status info">í…ŒìŠ¤íŠ¸ ëŒ€ê¸° ì¤‘...</div>
        <button onclick="testWrite()">ğŸ“ ì“°ê¸° í…ŒìŠ¤íŠ¸</button>
    </div>
    
    <div class="test-card">
        <h3><span class="step-indicator">6</span>ë„¤íŠ¸ì›Œí¬ ì§„ë‹¨</h3>
        <div id="networkStatus" class="status info">ì§„ë‹¨ ëŒ€ê¸° ì¤‘...</div>
        <button onclick="diagnoseNetwork()">ğŸŒ ë„¤íŠ¸ì›Œí¬ ì§„ë‹¨</button>
    </div>
    
    <div class="test-card">
        <h3><span class="step-indicator">âš¡</span>ì „ì²´ ìë™ í…ŒìŠ¤íŠ¸</h3>
        <div id="autoStatus" class="status info">ìë™ í…ŒìŠ¤íŠ¸ ëŒ€ê¸° ì¤‘...</div>
        <button onclick="runAllTests()" style="background: #28a745;">ğŸ”„ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
    </div>

    <!-- Firebase v9+ modular SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-app.js";
        import { 
            getFirestore, 
            connectFirestoreEmulator,
            collection, 
            doc, 
            getDoc,
            getDocs, 
            setDoc, 
            serverTimestamp,
            enableNetwork,
            disableNetwork
        } from "https://www.gstatic.com/firebasejs/11.8.1/firebase-firestore.js";
        
        // Firebase ì„¤ì •
        const firebaseConfig = {
            apiKey: "AIzaSyAfSlSi4pNlKvMU-NBpQ3ZWSeG4QNpZiCk",
            authDomain: "kdv-sys.firebaseapp.com",
            projectId: "kdv-sys",
            storageBucket: "kdv-sys.firebasestorage.app",
            messagingSenderId: "352925761129",
            appId: "1:352925761129:web:a9c9cf2e1154d745faecf8"
        };
        
        let app, db;
        let testResults = {};
        
        // ì„¤ì • ì •ë³´ í‘œì‹œ
        function showConfig() {
            const configEl = document.getElementById('configInfo');
            configEl.textContent = `í”„ë¡œì íŠ¸ ID: ${firebaseConfig.projectId}
API í‚¤: ${firebaseConfig.apiKey.substring(0, 10)}...
ì¸ì¦ ë„ë©”ì¸: ${firebaseConfig.authDomain}
ìŠ¤í† ë¦¬ì§€: ${firebaseConfig.storageBucket}
ì•± ID: ${firebaseConfig.appId}`;
        }
        
        // 1. Firebase ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸
        window.testInit = async function() {
            const statusEl = document.getElementById('initStatus');
            statusEl.className = 'status info';
            statusEl.textContent = 'ğŸ”„ Firebase ì´ˆê¸°í™” ì¤‘...';
            
            try {
                console.log('ğŸš€ Firebase ì´ˆê¸°í™” ì‹œì‘...');
                
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                
                console.log('âœ… Firebase ì•± ì´ˆê¸°í™” ì„±ê³µ:', app.name);
                console.log('âœ… Firestore ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì„±ê³µ');
                
                statusEl.className = 'status success';
                statusEl.textContent = `âœ… Firebase ì´ˆê¸°í™” ì„±ê³µ!

ì•± ì´ë¦„: ${app.name}
í”„ë¡œì íŠ¸ ID: ${app.options.projectId}
Firestore ìƒíƒœ: ì—°ê²°ë¨`;
                
                testResults.init = true;
                
            } catch (error) {
                console.error('âŒ Firebase ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                statusEl.className = 'status error';
                statusEl.textContent = `âŒ Firebase ì´ˆê¸°í™” ì‹¤íŒ¨

ì—ëŸ¬: ${error.message}
ì½”ë“œ: ${error.code || 'unknown'}`;
                
                testResults.init = false;
            }
        }
        
        // 2. Firestore ê¸°ë³¸ ì—°ê²° í…ŒìŠ¤íŠ¸
        window.testFirestore = async function() {
            const statusEl = document.getElementById('firestoreStatus');
            
            if (!db) {
                statusEl.className = 'status warning';
                statusEl.textContent = 'âš ï¸ Firebaseê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë¨¼ì € ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.';
                return;
            }
            
            statusEl.className = 'status info';
            statusEl.textContent = 'ğŸ”„ Firestore ì—°ê²° í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                console.log('ğŸ”Œ Firestore ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹œì‘...');
                
                // Firestore ì¸ìŠ¤í„´ìŠ¤ ì •ë³´ í™•ì¸
                console.log('ğŸ“Š Firestore ì„¤ì •:', {
                    app: db.app.name,
                    settings: db._delegate._databaseId
                });
                
                // ì»¬ë ‰ì…˜ ì°¸ì¡° ìƒì„± í…ŒìŠ¤íŠ¸
                const testCollection = collection(db, 'connection-test');
                console.log('âœ… ì»¬ë ‰ì…˜ ì°¸ì¡° ìƒì„± ì„±ê³µ:', testCollection.id);
                
                // ë¬¸ì„œ ì°¸ì¡° ìƒì„± í…ŒìŠ¤íŠ¸
                const testDoc = doc(db, 'connection-test', 'test-doc');
                console.log('âœ… ë¬¸ì„œ ì°¸ì¡° ìƒì„± ì„±ê³µ:', testDoc.id);
                
                statusEl.className = 'status success';
                statusEl.textContent = `âœ… Firestore ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ!

ì»¬ë ‰ì…˜ ì°¸ì¡°: ${testCollection.id}
ë¬¸ì„œ ì°¸ì¡°: ${testDoc.id}
ë°ì´í„°ë² ì´ìŠ¤ ID: ${db._delegate._databaseId.projectId}`;
                
                testResults.firestore = true;
                
            } catch (error) {
                console.error('âŒ Firestore ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
                statusEl.className = 'status error';
                statusEl.textContent = `âŒ Firestore ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨

ì—ëŸ¬: ${error.message}
ì½”ë“œ: ${error.code || 'unknown'}
ìŠ¤íƒ: ${error.stack}`;
                
                testResults.firestore = false;
            }
        }
        
        // 3. ì½ê¸° í…ŒìŠ¤íŠ¸
        window.testRead = async function() {
            const statusEl = document.getElementById('readStatus');
            
            if (!db) {
                statusEl.className = 'status warning';
                statusEl.textContent = 'âš ï¸ Firebaseê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
                return;
            }
            
            statusEl.className = 'status info';
            statusEl.textContent = 'ğŸ”„ ì½ê¸° í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                console.log('ğŸ“– Firestore ì½ê¸° í…ŒìŠ¤íŠ¸ ì‹œì‘...');
                
                // 1. ë¹ˆ ì»¬ë ‰ì…˜ ì½ê¸° ì‹œë„
                const emptyCollection = collection(db, 'empty-test-collection');
                const emptySnapshot = await getDocs(emptyCollection);
                console.log('âœ… ë¹ˆ ì»¬ë ‰ì…˜ ì½ê¸° ì„±ê³µ, ë¬¸ì„œ ê°œìˆ˜:', emptySnapshot.size);
                
                // 2. ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ì»¬ë ‰ì…˜ ì½ê¸°
                const testCollection = collection(db, 'test');
                const testSnapshot = await getDocs(testCollection);
                console.log('âœ… í…ŒìŠ¤íŠ¸ ì»¬ë ‰ì…˜ ì½ê¸° ì„±ê³µ, ë¬¸ì„œ ê°œìˆ˜:', testSnapshot.size);
                
                let docs = [];
                testSnapshot.forEach(doc => {
                    docs.push({
                        id: doc.id,
                        data: doc.data()
                    });
                });
                
                statusEl.className = 'status success';
                statusEl.textContent = `âœ… ì½ê¸° í…ŒìŠ¤íŠ¸ ì„±ê³µ!

ë¹ˆ ì»¬ë ‰ì…˜ ë¬¸ì„œ ìˆ˜: ${emptySnapshot.size}
í…ŒìŠ¤íŠ¸ ì»¬ë ‰ì…˜ ë¬¸ì„œ ìˆ˜: ${testSnapshot.size}
ì½ê¸° ê¶Œí•œ: ì •ìƒ
${docs.length > 0 ? '\n\në¬¸ì„œ ë°ì´í„°:\n' + JSON.stringify(docs, null, 2) : ''}`;
                
                testResults.read = true;
                
            } catch (error) {
                console.error('âŒ ì½ê¸° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
                statusEl.className = 'status error';
                statusEl.textContent = `âŒ ì½ê¸° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨

ì—ëŸ¬: ${error.message}
ì½”ë“œ: ${error.code || 'unknown'}

${error.code === 'permission-denied' ? 
  'ğŸ’¡ ê¶Œí•œ ê±°ë¶€ - Firestore ë³´ì•ˆ ê·œì¹™ì„ í™•ì¸í•˜ì„¸ìš”' : 
  error.code === 'unavailable' ? 
  'ğŸŒ ì„œë¹„ìŠ¤ ì ‘ê·¼ ë¶ˆê°€ - ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•˜ì„¸ìš”' :
  'ğŸ¤” ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ì…ë‹ˆë‹¤'}`;
                
                testResults.read = false;
            }
        }
        
        // 4. ì“°ê¸° í…ŒìŠ¤íŠ¸
        window.testWrite = async function() {
            const statusEl = document.getElementById('writeStatus');
            
            if (!db) {
                statusEl.className = 'status warning';
                statusEl.textContent = 'âš ï¸ Firebaseê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
                return;
            }
            
            statusEl.className = 'status info';
            statusEl.textContent = 'ğŸ”„ ì“°ê¸° í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                console.log('ğŸ“ Firestore ì“°ê¸° í…ŒìŠ¤íŠ¸ ì‹œì‘...');
                
                // í˜„ì¬ ì‹œê°„ìœ¼ë¡œ ê³ ìœ í•œ ë¬¸ì„œ ID ìƒì„±
                const timestamp = new Date().getTime();
                const testDocId = `test-${timestamp}`;
                
                // ë‹¨ìˆœí•œ ë°ì´í„°ë¡œ ì“°ê¸° í…ŒìŠ¤íŠ¸ (serverTimestamp ì‚¬ìš© ì•ˆí•¨)
                const testDoc = doc(db, 'test', testDocId);
                const testData = {
                    message: 'ì“°ê¸° í…ŒìŠ¤íŠ¸ ì„±ê³µ',
                    timestamp: new Date().toISOString(),
                    testId: testDocId,
                    version: '2.0'
                };
                
                console.log('ğŸ“ ë°ì´í„° ì“°ê¸° ì‹œë„:', testData);
                
                await setDoc(testDoc, testData);
                console.log('âœ… ë¬¸ì„œ ì“°ê¸° ì„±ê³µ:', testDocId);
                
                // ì“°ê¸° ê²€ì¦ì„ ìœ„í•œ ì½ê¸°
                const writtenDoc = await getDoc(testDoc);
                if (writtenDoc.exists()) {
                    console.log('âœ… ì“°ê¸° ê²€ì¦ ì„±ê³µ:', writtenDoc.data());
                    
                    statusEl.className = 'status success';
                    statusEl.textContent = `âœ… ì“°ê¸° í…ŒìŠ¤íŠ¸ ì„±ê³µ!

ë¬¸ì„œ ID: ${testDocId}
ì“°ê¸° ê¶Œí•œ: ì •ìƒ
ë°ì´í„° ê²€ì¦: ì„±ê³µ

ì‘ì„±ëœ ë°ì´í„°:
${JSON.stringify(writtenDoc.data(), null, 2)}`;
                    
                    testResults.write = true;
                } else {
                    throw new Error('ë¬¸ì„œê°€ ì“°ì—¬ì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
                }
                
            } catch (error) {
                console.error('âŒ ì“°ê¸° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
                statusEl.className = 'status error';
                statusEl.textContent = `âŒ ì“°ê¸° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨

ì—ëŸ¬: ${error.message}
ì½”ë“œ: ${error.code || 'unknown'}

${error.code === 'permission-denied' ? 
  'ğŸ’¡ ê¶Œí•œ ê±°ë¶€ - Firestore ë³´ì•ˆ ê·œì¹™ì„ í™•ì¸í•˜ì„¸ìš”\n(í˜„ì¬ ê·œì¹™: allow read, write: if true)' : 
  error.code === 'unavailable' ? 
  'ğŸŒ ì„œë¹„ìŠ¤ ì ‘ê·¼ ë¶ˆê°€ - ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•˜ì„¸ìš”' :
  error.code === 'unauthenticated' ?
  'ğŸ” ì¸ì¦ í•„ìš” - ìµëª… ì ‘ê·¼ì´ í—ˆìš©ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤' :
  'ğŸ¤” ì˜ˆìƒì¹˜ ëª»í•œ ì—ëŸ¬ì…ë‹ˆë‹¤'}

ë””ë²„ê·¸ ì •ë³´:
- API í‚¤ ìœ íš¨ì„±: ${firebaseConfig.apiKey ? 'âœ…' : 'âŒ'}
- í”„ë¡œì íŠ¸ ID: ${firebaseConfig.projectId}
- í˜„ì¬ ì‹œê°„: ${new Date().toISOString()}`;
                
                testResults.write = false;
            }
        }
        
        // 5. ë„¤íŠ¸ì›Œí¬ ì§„ë‹¨
        window.diagnoseNetwork = async function() {
            const statusEl = document.getElementById('networkStatus');
            statusEl.className = 'status info';
            statusEl.textContent = 'ğŸ”„ ë„¤íŠ¸ì›Œí¬ ì§„ë‹¨ ì¤‘...';
            
            const diagnostics = [];
            
            try {
                // 1. Firebase API ì—”ë“œí¬ì¸íŠ¸ ì—°ê²° í…ŒìŠ¤íŠ¸
                diagnostics.push('ğŸŒ ë„¤íŠ¸ì›Œí¬ ì§„ë‹¨ ì‹œì‘...');
                
                // 2. User Agent í™•ì¸
                diagnostics.push(`ğŸ“± User Agent: ${navigator.userAgent}`);
                
                // 3. ì˜¨ë¼ì¸ ìƒíƒœ í™•ì¸
                diagnostics.push(`ğŸŒ ì˜¨ë¼ì¸ ìƒíƒœ: ${navigator.onLine ? 'âœ… ì˜¨ë¼ì¸' : 'âŒ ì˜¤í”„ë¼ì¸'}`);
                
                // 4. Firestore URL ì ‘ê·¼ í…ŒìŠ¤íŠ¸
                const firestoreUrl = `https://firestore.googleapis.com/v1/projects/${firebaseConfig.projectId}/databases/(default)/documents`;
                diagnostics.push(`ğŸ”— Firestore API URL: ${firestoreUrl}`);
                
                try {
                    const response = await fetch(firestoreUrl, {
                        method: 'GET',
                        headers: {
                            'Authorization': `Bearer ${firebaseConfig.apiKey}`
                        }
                    });
                    diagnostics.push(`ğŸ“¡ ì§ì ‘ API í˜¸ì¶œ: ${response.status} ${response.statusText}`);
                } catch (fetchError) {
                    diagnostics.push(`ğŸ“¡ ì§ì ‘ API í˜¸ì¶œ ì‹¤íŒ¨: ${fetchError.message}`);
                }
                
                // 5. ë¡œì»¬ í™˜ê²½ í™•ì¸
                diagnostics.push(`ğŸ“‚ í˜„ì¬ URL: ${window.location.href}`);
                diagnostics.push(`ğŸ”’ í”„ë¡œí† ì½œ: ${window.location.protocol}`);
                
                if (window.location.protocol === 'file:') {
                    diagnostics.push('âš ï¸ ë¡œì»¬ íŒŒì¼ ì ‘ê·¼ - CORS ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤');
                }
                
                statusEl.className = 'status success';
                statusEl.textContent = diagnostics.join('\n');
                
            } catch (error) {
                diagnostics.push(`âŒ ì§„ë‹¨ ì¤‘ ì˜¤ë¥˜: ${error.message}`);
                statusEl.className = 'status error';
                statusEl.textContent = diagnostics.join('\n');
            }
        }
        
        // 6. ì „ì²´ ìë™ í…ŒìŠ¤íŠ¸
        window.runAllTests = async function() {
            const statusEl = document.getElementById('autoStatus');
            statusEl.className = 'status info';
            statusEl.textContent = 'ğŸ”„ ì „ì²´ ìë™ í…ŒìŠ¤íŠ¸ ì‹œì‘...';
            
            const results = [];
            
            try {
                // ìˆœì°¨ì ìœ¼ë¡œ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
                results.push('ğŸš€ 1/5 Firebase ì´ˆê¸°í™”...');
                statusEl.textContent = results.join('\n');
                await testInit();
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                results.push('ğŸ”Œ 2/5 Firestore ì—°ê²°...');
                statusEl.textContent = results.join('\n');
                await testFirestore();
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                results.push('ğŸ“– 3/5 ì½ê¸° í…ŒìŠ¤íŠ¸...');
                statusEl.textContent = results.join('\n');
                await testRead();
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                results.push('ğŸ“ 4/5 ì“°ê¸° í…ŒìŠ¤íŠ¸...');
                statusEl.textContent = results.join('\n');
                await testWrite();
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                results.push('ğŸŒ 5/5 ë„¤íŠ¸ì›Œí¬ ì§„ë‹¨...');
                statusEl.textContent = results.join('\n');
                await diagnoseNetwork();
                
                // ìµœì¢… ê²°ê³¼ ì •ë¦¬
                const summary = [];
                summary.push('ğŸ“Š ì „ì²´ í…ŒìŠ¤íŠ¸ ê²°ê³¼:');
                summary.push('');
                summary.push(`ì´ˆê¸°í™”: ${testResults.init ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}`);
                summary.push(`Firestore ì—°ê²°: ${testResults.firestore ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}`);
                summary.push(`ì½ê¸°: ${testResults.read ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}`);
                summary.push(`ì“°ê¸°: ${testResults.write ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨'}`);
                summary.push('');
                
                const successCount = Object.values(testResults).filter(r => r).length;
                const totalCount = Object.keys(testResults).length;
                
                if (successCount === totalCount) {
                    summary.push('ğŸ‰ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼! Firebase ì—°ê²°ì´ ì •ìƒì…ë‹ˆë‹¤.');
                    statusEl.className = 'status success';
                } else {
                    summary.push(`âš ï¸ ${totalCount - successCount}ê°œ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨. ìœ„ì˜ ê°œë³„ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.`);
                    statusEl.className = 'status warning';
                }
                
                statusEl.textContent = summary.join('\n');
                
            } catch (error) {
                results.push(`âŒ ìë™ í…ŒìŠ¤íŠ¸ ì¤‘ ì˜¤ë¥˜: ${error.message}`);
                statusEl.className = 'status error';
                statusEl.textContent = results.join('\n');
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œì‹œ ì„¤ì • ì •ë³´ í‘œì‹œ ë° ìë™ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ§ª Firebase í…ŒìŠ¤íŠ¸ í˜ì´ì§€ v2.0 ë¡œë“œ ì™„ë£Œ');
            showConfig();
            
            // 3ì´ˆ í›„ ìë™ìœ¼ë¡œ ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸ ì‹¤í–‰
            setTimeout(() => {
                testInit();
            }, 2000);
        });
    </script>
</body>
</html>